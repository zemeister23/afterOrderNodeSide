{"version":3,"sources":["../src/publitio-api.js"],"names":["PublitioAPI","key","secret","version","API","VERSION","url","URL","call","method","args","Error","helper","createUrl","callApi","file","action","Object","values","ACTIONS","includes","getUrlForFileCreation","uploadFile","publitioApi"],"mappings":";;;;;;;;AAAA;;AACA;;;;;;;;IAEqBA,W;AACnB,uBAAaC,GAAb,EAAkBC,MAAlB,EAA0B;AAAA;;AACxB,SAAKC,OAAL,GAAeC,eAAIC,OAAnB;AACA,SAAKC,GAAL,GAAWF,eAAIG,GAAf;AACA,SAAKN,GAAL,GAAWA,GAAX;AACA,SAAKC,MAAL,GAAcA,MAAd;AACD;;;;WAED,mBAAW;AACT,aAAO,KAAKC,OAAZ;AACD;;;WAED,cAAMK,KAAN,EAAuC;AAAA,UAA3BC,MAA2B,uEAAlB,KAAkB;AAAA,UAAXC,IAAW,uEAAJ,EAAI;;AACrC,UAAI,OAAOF,KAAP,KAAgB,QAApB,EAA8B;AAC5B,cAAM,IAAIG,KAAJ,CAAU,0CAAV,CAAN;AACD;;AAED,UAAI,OAAOF,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,cAAM,IAAIE,KAAJ,CAAU,2CAAV,CAAN;AACD;;AAED,UAAML,GAAG,GAAGM,eAAOC,SAAP,CAAiBL,KAAjB,EAAuBE,IAAvB,EAA6B,KAAKJ,GAAlC,EAAuC,KAAKL,GAA5C,EAAiD,KAAKC,MAAtD,EAA8D,KAAKC,OAAnE,CAAZ;;AACA,aAAOS,eAAOE,OAAP,CAAeR,GAAf,EAAoBG,MAApB,CAAP;AACD;;;WAED,oBAAYM,IAAZ,EAA8C;AAAA,UAA5BC,MAA4B,uEAAnB,MAAmB;AAAA,UAAXN,IAAW,uEAAJ,EAAI;;AAC5C,UAAI,CAACO,MAAM,CAACC,MAAP,CAAcC,kBAAd,EAAuBC,QAAvB,CAAgCJ,MAAhC,CAAL,EAA8C;AAC5C,cAAM,IAAIL,KAAJ,yDAA2DM,MAAM,CAACC,MAAP,CAAcC,kBAAd,CAA3D,EAAN;AACD;;AAED,UAAMb,GAAG,GAAGM,eAAOS,qBAAP,CAA6BL,MAA7B,EAAqCN,IAArC,EAA2C,KAAKJ,GAAhD,EAAqD,KAAKL,GAA1D,EAA+D,KAAKC,MAApE,EAA4E,KAAKC,OAAjF,CAAZ;;AACA,aAAOS,eAAOU,UAAP,CAAkBP,IAAlB,EAAwBT,GAAxB,CAAP;AACD;;;WAED,4BAA6B;AAAA,UAAXI,IAAW,uEAAJ,EAAI;;AAC3B,UAAMJ,GAAG,GAAGM,eAAOS,qBAAP,CAA6B,MAA7B,EAAqCX,IAArC,EAA2C,KAAKJ,GAAhD,EAAqD,KAAKL,GAA1D,EAA+D,KAAKC,MAApE,EAA4E,KAAKC,OAAjF,CAAZ;;AACA,aAAOS,eAAOE,OAAP,CAAeR,GAAf,EAAoB,MAApB,CAAP;AACD;;;WAED,2BAA4B;AAAA,UAAXI,IAAW,uEAAJ,EAAI;;AAC1B,UAAMJ,GAAG,GAAGM,eAAOS,qBAAP,CAA6B,MAA7B,EAAqCX,IAArC,EAA2C,KAAKJ,GAAhD,EAAqD,KAAKL,GAA1D,EAA+D,KAAKC,MAApE,EAA4E,KAAKC,OAAjF,CAAZ;;AACA,aAAOG,GAAP;AACD;;;;;;;;AAGI,SAASiB,WAAT,CAAsBtB,GAAtB,EAA2BC,MAA3B,EAAmC;AACxC,SAAO,IAAIF,WAAJ,CAAgBC,GAAhB,EAAqBC,MAArB,CAAP;AACD","sourcesContent":["import { helper } from './helper'\r\nimport { API, ACTIONS } from './constants'\r\n\r\nexport default class PublitioAPI {\r\n  constructor (key, secret) {\r\n    this.version = API.VERSION\r\n    this.url = API.URL\r\n    this.key = key\r\n    this.secret = secret\r\n  }\r\n\r\n  version () {\r\n    return this.version\r\n  }\r\n\r\n  call (call, method = 'GET', args = {}) {\r\n    if (typeof call !== 'string') {\r\n      throw new Error('First parameter to call must be a string')\r\n    }\r\n\r\n    if (typeof method !== 'string') {\r\n      throw new Error('Second parameter to call must be a string')\r\n    }\r\n\r\n    const url = helper.createUrl(call, args, this.url, this.key, this.secret, this.version)\r\n    return helper.callApi(url, method)\r\n  }\r\n\r\n  uploadFile (file, action = 'file', args = {}) {\r\n    if (!Object.values(ACTIONS).includes(action)) {\r\n      throw new Error(`Second parameter to uploadFile must be one of ${Object.values(ACTIONS)}`)\r\n    }\r\n\r\n    const url = helper.getUrlForFileCreation(action, args, this.url, this.key, this.secret, this.version)\r\n    return helper.uploadFile(file, url)\r\n  }\r\n\r\n  uploadRemoteFile (args = {}) {\r\n    const url = helper.getUrlForFileCreation('file', args, this.url, this.key, this.secret, this.version)\r\n    return helper.callApi(url, 'POST')\r\n  }\r\n\r\n  uploadUrlSigned (args = {}) { \r\n    const url = helper.getUrlForFileCreation('file', args, this.url, this.key, this.secret, this.version)\r\n    return url\r\n  }\r\n}\r\n\r\nexport function publitioApi (key, secret) {\r\n  return new PublitioAPI(key, secret)\r\n}\r\n"],"file":"publitio-api.js"}